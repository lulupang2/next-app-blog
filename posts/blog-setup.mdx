---
title: 'ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°'
date: '2024-05-20'
description: 'ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°'
thumbnail: '/blog/thumbnail/bgDummy.webp'
category: 'blog'
---
<Toc toc={toc} />


### ì†Œê°œ



`next-mdx-remote`ëŠ” MDX íŒŒì¼ì„ ì›ê²©ìœ¼ë¡œ ê°€ì ¸ì™€ì„œ ë Œë”ë§í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. MDXëŠ” Markdownê³¼ JSXë¥¼ ì¡°í•©í•´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ, ë™ì ì¸ ì½˜í…ì¸ ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG) ë° ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR) í™˜ê²½ì—ì„œ MDX íŒŒì¼ì„ ì‰½ê²Œ ê´€ë¦¬í•˜ê³  í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, Markdownê³¼ JSXë¥¼ ì„ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë§¤ìš° ìœ ì—°í•˜ê³  ë™ì ì¸ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



- [next-mdx-remote GitHub repository](https://github.com/hashicorp/next-mdx-remote)

- [next-mdx-remote-client GitHub repository](https://github.com/ipikuka/next-mdx-remote-client)



`next-mdx-remote-client`ëŠ” `next-mdx-remote`ê°€ ì—…ë°ì´íŠ¸ê°€ ëŠ¦ì–´ì§„ë‹¤ê³  ë§Œë“¤ì–´ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ë°
ì‘ì„±ì¼(24-05-23)ê¸°ì¤€ìœ¼ë¡œ ë‹¹ì¼ ì—…ë°ì´íŠ¸ê°€ ì˜¬ë¼ì™€ë²„ë ¸ë‹¤. ~~ì•„..~~
react 19ëŒ€ì‘ë¶€í„° MDX v3 ì—…ë°ì´íŠ¸, ë“±ë“± ê½¤ í° ì—…ë°ì´íŠ¸ë¼ì„œ ê·¸ëƒ¥ ë°”ê¿”ì“°ê¸°ë¡œ í–ˆë‹¤.

ë‹¤í–‰ì¸ì ì€ `next-mdx-remote-client`ê°€ ì›ë³¸ê³¼ ì‚¬ìš©ë°©ë²•ì´ ê±°ì˜ ë˜‘ê°™ê¸° ë•Œë¬¸ì— í° ìˆ˜ì •ì€ í•„ìš”ì—†ì„ë“¯ í•˜ë‹¤.

### ì˜ˆì œ ì½”ë“œ



ì‚¬ìš© ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë°ì´í„°ë¥¼ `<MDXRemote>` ì»´í¬ë„ŒíŠ¸ì˜ `source` ì†ì„±ìœ¼ë¡œ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.



```tsx title="page.tsx"

import { MDXRemote } from 'next-mdx-remote/rsc';



export default function Page() {

    const MDXsource = `

    ## ì œëª©1

    ### ì¤‘ì œëª©1-1    

    #### ì†Œì œëª©1-1-1

    `;

    return (

        <MDXRemote source={MDXsource} />

    );

}

```







ë¬¼ë¡  ìŠ¤íƒ€ì¼ë§ê³¼ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ ìœ„í•´ì„œ ì˜µì…˜ì„ ì¶”ê°€í•˜ë‹¤ë³´ë©´ ìƒê°ë³´ë‹¤ ê°„ë‹¨í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.



## ë¸”ë¡œê·¸ì— ì ìš©í•´ë³´ì



### ë””ë ‰í† ë¦¬ êµ¬ì¡°




â”£ ğŸ“‚app
â”ƒ â”£ ğŸ“‚blog
â”ƒ â”ƒ â”£ ğŸ“‚[slug]  
â”£ ğŸ“‚components
â”ƒ â”£ ğŸ“‚md
â”ƒ â”— ğŸ“‚ui
â”£ ğŸ“‚hooks
â”£ ğŸ“‚libs
â”£ ğŸ“‚posts
â”£ ğŸ“‚public
â”£ ğŸ“‚styles
â”£ ğŸ“‚types
### ë””ë ‰í† ë¦¬ë³„ ì„¤ëª…



- ğŸ“‚app: Next.js ë¼ìš°í„°ì™€ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
  - ğŸ“‚blog: ë¸”ë¡œê·¸ì™€ ê´€ë ¨ëœ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
    - ğŸ“‚[slug]: ìŠ¬ëŸ¬ê·¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ë™ì  ë¼ìš°íŒ…ì„ ì²˜ë¦¬í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.

- ğŸ“‚components: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸ê°€ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
  - ğŸ“‚md: Markdown ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
  - ğŸ“‚ui: ì¼ë°˜ì ì¸ UI êµ¬ì„± ìš”ì†Œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

- ğŸ“‚hooks: ì»¤ìŠ¤í…€ React í›…ë“¤ì´ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
- ğŸ“‚libs: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë‚˜ ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
- ğŸ“‚posts: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
- ğŸ“‚public: ì •ì  íŒŒì¼ë“¤ì„ ì €ì¥í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.  ex) ì´ë¯¸ì§€, í°íŠ¸ ë“±
- ğŸ“‚styles: CSS ìŠ¤íƒ€ì¼ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
- ğŸ“‚types: TypeScript íƒ€ì… ì •ì˜ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.



### Markdown íŒŒì¼ ê´€ë ¨ í•¨ìˆ˜



ë‚´ê°€ í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì„ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤:

1. List í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ëª¨ë“ (ì¼ì • ë²”ìœ„) Markdown íŒŒì¼ì˜ ë°ì´í„°

2. ìƒì„¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ê°œë³„ Markdown íŒŒì¼ ë°ì´í„°



```bash

pnpm i gray-matter

```



ì¼ë‹¨ frontmatterë¥¼ ì¶”ì¶œí•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ êµ³ì´ ë²ˆê±°ë¡­ê²Œ í•  í•„ìš”ëŠ” ì—†ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.



```ts

import { readFile, readdir } from "fs/promises";

import matter from 'gray-matter';

import path from 'path';



const getPostData = async (filename, includeSource = false) => {

    const fileData = await readFile(path.join(process.cwd(), "posts", filename), "utf-8");

    const { content, data } = matter(fileData);

    const slug = filename.replace(/\.mdx?$/, "");

    return {

        slug,

        frontmatter: data,

        source: includeSource ? content : undefined,

    };

};



export const getPostList = async () => {

    const postList = await readdir(path.join(process.cwd(), "posts"));

    const files = postList.filter((filename) => path.extname(filename) === ".mdx");

    return Promise.all(files.map((filename) => getPostData(filename)));

};

```



> **Note**: ì™œ `Promise.all`ì„ ì“°ëƒ?

> - `Promise.all`ë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œ ë³‘ë ¬ ì²˜ë¦¬ë¡œ ë” ë¹ ë¥´ê²Œ ì‘ì—…ë©ë‹ˆë‹¤.

> - `await`ì˜ ê²½ìš° í•´ë‹¹ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ê¸° ë•Œë¬¸ì— ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.



ë¸”ë¡œê·¸ ìƒì„¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ê°œë³„ Markdown ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.



```ts

export const getPost = async (filename) => {

    const { frontmatter, slug, source } = await getPostData(filename, true);

    return {

        slug,

        frontmatter,

        source,

    };

};

```



`includeSource`ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ trueë¡œ ì„¤ì •í•˜ì—¬ Markdownì˜ sourceê¹Œì§€ ë°›ëŠ” ì  ì´ì™¸ì—ëŠ” list í˜ì´ì§€ì™€ ë™ì¼í•©ë‹ˆë‹¤.



#### blog/page.tsxì—ì„œ ë°ì´í„° í™•ì¸



```tsx title="blog/page.tsx"

import { getPostList } from "@/libs/markdown";



export default async function Page() {

    return (

        <section>

            <pre>{JSON.stringify(await getPostList(), null, 2)}</pre>

        </section>

    );

}

```







ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.



#### blog/[slug]/page.tsxì—ì„œ ë°ì´í„° í™•ì¸



```tsx title="blog/[slug]/page.tsx"

import { getPost } from "@/libs/markdown";



export async function generateStaticParams() {

    // ...

}



export async function generateMetadata() {

    // ...

}



export default async function Page({ params }) {

    const postData = await getPost(`${params.slug}.mdx`);

    return (

        <div>

            <h1>{postData.frontmatter.title}</h1>

            <div>{postData.source}</div>

        </div>

    );

}

```







ì—­ì‹œ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.



### List í˜ì´ì§€



```tsx title="blog/page.tsx"

import { getPostList } from "@/libs/markdown";

import PostList from "@/components/element/PostList";



export default async function Page() {

    const posts = await getPostList();

    const postData = posts

        .filter((date) => date)

        .sort((a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date));

    

    if (!posts) return <div>Not found post!</div>;

    

    return (

        <section>

            <PostList posts={postData} />

        </section>

    );

}

```



ì•ì—ì„œ ì‘ì„±í•œ í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ë°˜í™˜ë°›ì€ ë’¤, ë‚ ì§œìˆœìœ¼ë¡œ ì •ë ¬í•˜ê³  ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ì— propsë¡œ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. í‚¤ì›Œë“œ ë° ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰, ì •ë ¬ ì¡°ê±´ì€ ë‚˜ì¤‘ì— êµ¬í˜„í•˜ê¸°ë¡œ í•´ë†“ê³  ì„ì‹œë¡œ ë‚ ì§œìˆœìœ¼ë¡œë§Œ ì •ë ¬í–ˆìŠµë‹ˆë‹¤.



ìŠ¤íƒ€ì¼ë§ì€ propsë¡œ ì „ë‹¬ë°›ì€ ê°’ì„ ë°˜ë³µë¬¸ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.



### ìƒì„¸ í˜ì´ì§€



ì •ì  í˜ì´ì§€(SSG) ìƒì„±ì„ ìœ„í•´ ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ `getStaticProps`ì™€ `getStaticPaths`ëŠ” App Routerì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  `generateStaticParams`ë¡œ ë™ì  ê²½ë¡œë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.



```tsx title="blog/[slug]/page.tsx"

import { getPostList } from "@/libs/markdown";



export async function generateStaticParams() {

    const posts = await getPostList();

    return posts.map((post) => ({

        params: {

            slug: post.slug,

        },

    }));

}

```



ì•ì„œ ìƒì„±í•œ `getPostList` í•¨ìˆ˜ì˜ slug ê°’ë“¤ë¡œ HTMLì´ ìƒì„±ë©ë‹ˆë‹¤.



```tsx title="blog/[slug]/page.tsx"

import { getPost } from "@/libs/markdown";

import PostContents from "@/components/element/PostContents";



export default async function Page({ params }) {

    const postData = await getPost(`${params.slug}.mdx`);

    return (

        <article>

            <PostContents source={postData.source} />

        </article>

    );

}

```



`getStaticProps` í•¨ìˆ˜ ëŒ€ì‹  data fetching í•¨ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤. (ì˜ˆ: `getPost()`)

[nextjs app Router ê³µì‹ë¬¸ì„œ - Data Fetching](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating)



```tsx title="components/element/post-contents.tsx"

import { MDXRemote } from 'next-mdx-remote/rsc';

import remarkGfm from 'remark-gfm';

import remarkBreaks from 'remark-breaks';

import rehypeSlug from 'rehype-slug';

import rehypePrettyCode from 'rehype-pretty-code';



export default function PostContents({ source }) {

    const mdxOptions = {

        remarkPlugins: [remarkGfm, remarkBreaks],

        rehypePlugins: [rehypeSlug, [rehypePrettyCode, { theme: "dark-plus" }]],

    };



    return (

        <MDXRemote source={source} options={{ mdxOptions }} components={components} />

    );

}

```



`source`ëŠ” ë Œë”ë§ í˜ì´ì§€ì—ì„œ ì „ë‹¬ ë°›ì€ Markdownì˜ ë°ì´í„°ì´ê³ , `options`ëŠ” ë Œë”ë§ ì‹œì— ì‚¬ìš©í•  plugin ë“±ì˜ ì„¤ì •ì…ë‹ˆë‹¤. `components`ëŠ” ASTì—ì„œ HTMLë¡œ íŒŒì‹±ëœ HTML ìš”ì†Œë“¤ì˜ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•œ ê²ƒì…ë‹ˆë‹¤.



#### í”ŒëŸ¬ê·¸ì¸



##### Remark

- remarkGfm: Markdown ë‚´ì— Table, `~~ì·¨ì†Œì„ ~~` ë“±ì„ ì§€ì›í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.

- remarkBreaks: ê¸°ì¡´ì—ëŠ” ë‘ ì¤„ë¡œ ê°œí–‰í•´ì•¼ ì¤„ë°”ê¿ˆì´ ë˜ì§€ë§Œ, ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ í•œ ì¤„ ê°œí–‰ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.



##### Rehype

- rehypeSlug: ì œëª©ìš”ì†Œì— idê°’ ì¶”ê°€í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤. ëª©ì°¨ì—ì„œ í•´ë‹¹ ì œëª©ìš”ì†Œì— ì´ë™í•˜ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í• ë•Œ `href='#id`ë¥¼ ë˜ëŠ” scrollToë¥¼ ì‚¬ìš©í•˜ë“  ì…ë§›ì— ë§ê²Œ ì‚¬ìš©í•˜ë©´ ë˜ê² ë‹¤.

- rehypePrettyCode: ì½”ë“œ êµ¬ë¬¸ì— ìŠ¤íƒ€ì¼ë§ (VSCode í…Œë§ˆ)ì„ ì ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤. ê°œë°œ ë¸”ë¡œê·¸ì— í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.



ì›ë˜ëŠ” [shiki](https://shiki.style/)ë¥¼ ì‚¬ìš©í•˜ì—¬ two-slash ë“±ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì‹¶ì—ˆì§€ë§Œ, RSC ê´€ë ¨ í—¤ë”© ë¬¸ì œë¡œ ì¸í•´ ë‚˜ì¤‘ì— ì ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

```